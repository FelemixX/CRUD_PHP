create table client
(
    id         int auto_increment
        primary key,
    name       varchar(256) null,
    birth_date date         null
);

create table debt
(
    id          int auto_increment
        primary key,
    client_ID   int         null,
    document_ID int         null,
    debt        decimal(53) null
);

create table document
(
    id            int auto_increment
        primary key,
    number        decimal(53) null,
    creation_date date        null,
    client_ID     int         null
);

create table product
(
    id          int auto_increment
        primary key,
    document_ID int          null,
    p_name      varchar(256) null,
    quantity    int          null
);

create table user
(
    id    int auto_increment
        primary key,
    login varchar(256) null,
    pass  varchar(256) null,
    salt  varchar(256) null,
    name  varchar(256) null
);

create table logs
(
    id          int auto_increment
        primary key,
    last_update datetime null,
    debt_ID     int      null,
    constraint `log _debt_id_fk`
        foreign key (debt_ID) references debt (id)
            on update cascade on delete cascade
);



create
    definer = root@localhost procedure update_debt()
BEGIN

    DECLARE done INT DEFAULT FALSE;
    DECLARE ID INT;
    DECLARE DEBT VARCHAR(10);
    DECLARE CUR1 CURSOR for SELECT id,debt FROM debt;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    open CUR1;
    read_loop: LOOP
        FETCH CUR1 INTO ID, DEBT;
        INSERT INTO debt (`debt`)
        VALUES(@DEBT);
        if done then leave read_loop; end if;
    END LOOP;
    CLOSE CUR1;
END;

